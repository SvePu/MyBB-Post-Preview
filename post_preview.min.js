var post_preview={saved_posts:{},options:{fetch_url:a=>`https://community.mybb.com/thread-${a}.html`,preview_class:"post_preview",fetch_selectors:{body:".post_body",author:".author_avatar"},preview_css:{height:100,width:500,margin:30}},get_post:async(a,b)=>(b=`${b} ${post_preview.options.fetch_selectors.body}:eq(0)`,await new Promise((c,d)=>{$(a).load(b,(a,b,e)=>{"error"==b&&d(e),c(a)})}).catch(a=>console.log(`Unable to fetch post content: ${a.status}, ${a.statusText}`)),a),get_author:async(a,b)=>(b=`${b} ${post_preview.options.fetch_selectors.author}:eq(0)`,await new Promise((c,d)=>{$(a).load(b,{limit:1},(a,b,e)=>{"error"==b&&d(e),c(a)})}).catch(a=>console.log(`Unable to fetch content: ${a.status}, ${a.statusText}`)),a),get_preview:async a=>{let b=document.createElement("div"),c=document.createElement("div");c.setAttribute("class","post_author");let d=post_preview.options.fetch_url(a);return b=await post_preview.get_post(b,d),c=await post_preview.get_author(c,d),{a:c,p:b}},preview:async a=>{if(!a)return;post_preview.remove_previews();let b=a.target.closest("[data-preview-post]"),c=document.createElement("div");c.setAttribute("class",post_preview.options.preview_class);let d=document.createElement("span");d.id="preview_loader",d.innerText="Loading preview...",c.appendChild(d),b.appendChild(c),$(c).css({height:post_preview.options.preview_css.height+"px",width:post_preview.options.preview_css.width+"px",bottom:"40px"});let e,f=b.dataset.previewPost;post_preview.saved_posts[f]?e=post_preview.saved_posts[f]:(e=await post_preview.get_preview(f),post_preview.saved_posts[f]=e),d.outerHTML=null,post_preview.output_preview(c,e)},output_preview:(a,b)=>{a.appendChild(b.a),a.appendChild(b.p)},remove_previews:()=>{$("."+post_preview.options.preview_class).remove()}};$("[data-preview-post]").hover(a=>{post_preview.preview(a)},()=>{post_preview.remove_previews()});